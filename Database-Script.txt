create table ROLE (
  ID_ROLE bigint generated by default as identity primary key,
  name varchar(30),
  status int,
  creation_date timestamp with time zone default timezone('utc'::text, now()) not null,
  modification_date timestamp with time zone default timezone('utc'::text, now()) not null
);

create table APP_USER (
  ID_APP_USER bigint generated by default as identity primary key,
  lastname varchar(30),
  firstname varchar(20),
  email varchar(50),
  user_password varchar(32),
  profile_picture varchar(120),
  ID_ROLE int,
  status int,
  creation_date timestamp with time zone default timezone('utc'::text, now()) not null,
  modification_date timestamp with time zone default timezone('utc'::text, now()) not null,
  constraint FK_ID_ROLE
    foreign key(ID_ROLE)
     references ROLE(ID_ROLE)
);

create table ARTICLE (
  ID_ARTICLE bigint generated by default as identity primary key,
  title varchar(30),
  description varchar(50),
  image varchar(120),
  ID_APP_USER int,
  is_commentable boolean,
  status int,
  creation_date timestamp with time zone default timezone('utc'::text, now()) not null,
  modification_date timestamp with time zone default timezone('utc'::text, now()) not null,
  constraint FK_ID_APP_USER
    foreign key(ID_APP_USER)
     references APP_USER(ID_APP_USER)
);

create table CATEGORY (
  ID_CATEGORY bigint generated by default as identity primary key,
  name varchar(30),
  description varchar(50),
  id_parent_category int,
  category_type varchar(20),
  status int,
  creation_date timestamp with time zone default timezone('utc'::text, now()) not null,
  modification_date timestamp with time zone default timezone('utc'::text, now()) not null
);

create table COMMENT (
  ID_COMMENT bigint generated by default as identity primary key,
  content varchar(280),
  ID_APP_USER int,
  ID_ARTICLE int,
  status int,
  creation_date timestamp with time zone default timezone('utc'::text, now()) not null,
  modification_date timestamp with time zone default timezone('utc'::text, now()) not null,
  constraint FK_ID_APP_USER
   foreign key(ID_APP_USER)
     references APP_USER(ID_APP_USER),
  constraint FK_ARTICLE
   foreign key (ID_ARTICLE)
    references ARTICLE(ID_ARTICLE)
);

create table APP_LIKE (
  ID_APP_LIKE bigint generated by default as identity primary key,
  ID_APP_USER int,
  ID_COMMENT int,
  id_reaction varchar(20),
  status int,
  creation_date timestamp with time zone default timezone('utc'::text, now()) not null,
  modification_date timestamp with time zone default timezone('utc'::text, now()) not null,
  constraint FK_ID_APP_USER
   foreign key(ID_APP_USER)
     references APP_USER(ID_APP_USER),
  constraint FK_ID_COMMENT
   foreign key (ID_COMMENT)
    references COMMENT(ID_COMMENT)
);

create table ARTICLE_CATEGORY (
  ID_ARTICLE_CATEGORY bigint generated by default as identity primary key,
  ID_ARTICLE int,
  ID_CATEGORY int,
  constraint FK_ID_ARTICLE
   foreign key(ID_ARTICLE)
     references ARTICLE(ID_ARTICLE),
  constraint FK_ID_CATEGORY
   foreign key (ID_CATEGORY)
    references CATEGORY(ID_CATEGORY)
);